# Snapserver Configuration
# Leave empty for mDNS autodiscovery, or set IP/hostname manually
SNAPSERVER_HOST=
SNAPSERVER_PORT=1704
SNAPSERVER_RPC_PORT=1705

# Client Configuration (auto-generated by setup.sh)
# CLIENT_ID is derived from hostname: snapclient-<hostname>
CLIENT_ID=snapclient-raspberrypi

# Audio Configuration (auto-configured by setup.sh)
# Must be "default" so audio routes through multi_out (DAC + loopback for spectrum)
# Direct hw: devices bypass the loopback and the spectrum analyzer gets silence
SOUNDCARD=default

# ALSA Buffer Tuning â€” only applied for hw:/plughw: soundcards
# Higher values prevent underruns but increase latency (affects multi-room sync)
# buffer_time in milliseconds (50-2000), fragments (2-16)
# Ethernet: 120-160ms / 4 | WiFi: 200-240ms / 6-8 | Poor WiFi: 300-400ms / 8
ALSA_BUFFER_TIME=150
ALSA_FRAGMENTS=4

# Mixer mode: hardware (default), software, or none
# hardware = DAC controls volume, loopback gets full-scale audio (best for spectrum)
# software = snapclient attenuates audio before loopback (spectrum is volume-dependent)
# Requires hardware mixer support on your audio HAT/DAC (most HATs support it)
MIXER=hardware

# Metadata Server (snapMULTI server address for track info + cover art)
# setup.sh auto-discovers via mDNS when a display is active.
# Set manually to the server's IP/hostname if mDNS is unavailable.
# Defaults to localhost (correct only for server+player on same Pi).
METADATA_HOST=
METADATA_HTTP_PORT=8083

# Display Resolution (optional, auto-configured by setup.sh)
# Leave empty to auto-detect from framebuffer (capped at 1920x1080).
# Output is always scaled to actual framebuffer size.
DISPLAY_RESOLUTION=

# Audio sample rate (must match Snapserver output: 44100 or 48000)
SAMPLE_RATE=44100

# Spectrum Analyzer Band Resolution: half-octave (21 bands) or third-octave (31 bands)
BAND_MODE=third-octave

# Docker Compose profiles (auto-configured by setup.sh)
# Set to "framebuffer" to enable fb-display container
COMPOSE_PROFILES=

# ============================================================
# Resource Limits (auto-configured by setup.sh)
# ============================================================
# setup.sh detects your hardware and sets appropriate limits.
# Override manually if needed.
#
# Profiles:
#   low      - Pi Zero 2 W, Pi 3, <2GB RAM
#   medium   - Pi 4 2GB, 2-4GB RAM
#   high     - Pi 4 4GB+, Pi 5, 8GB+ RAM
#
# To reconfigure: ./scripts/setup.sh --auto <config>
# ============================================================

# Snapclient (core audio client)
#SNAPCLIENT_MEM_LIMIT=128M
#SNAPCLIENT_MEM_RESERVE=64M
#SNAPCLIENT_CPU_LIMIT=0.5

# Audio Visualizer (spectrum analyzer)
#VISUALIZER_MEM_LIMIT=256M
#VISUALIZER_MEM_RESERVE=128M
#VISUALIZER_CPU_LIMIT=1.0

# Framebuffer Display (optional, fb-display profile)
#FBDISPLAY_MEM_LIMIT=256M
#FBDISPLAY_MEM_RESERVE=128M
#FBDISPLAY_CPU_LIMIT=1.0

# ============================================================
# Read-Only Filesystem (optional)
# ============================================================
# Enable read-only root filesystem using overlayfs.
# Protects SD card from corruption on power loss.
# When enabled:
#   - Root filesystem is read-only (overlay on top of actual SD card)
#   - All writes go to RAM-backed tmpfs (lost on reboot)
#   - Docker uses fuse-overlayfs storage driver
#
# To temporarily disable for updates:
#   sudo ro-mode disable && sudo reboot
#   # Make changes...
#   sudo ro-mode enable && sudo reboot
#
# Note: Requires reboot after setup.sh completes
ENABLE_READONLY=true
